<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>noaiËÉåÂçïËØç</title>
    <style>
        body {
            background-color: #f0f0f0;
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            text-align: center;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 300px;
            min-height: 80vh; /* Ensure the container takes at least 90% of the viewport height */
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .refresh-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
            color: #555;
        }
        textarea {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            resize: vertical;
            flex-grow: 1; /* Allow textarea to grow and fill available space */
        }
        input[type="text"] {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button#submitBtn {
            background-color: #007bff;
            color: white;
        }
        button#restartBtn {
            background-color: #dc3545;
            color: white;
        }
        button#luckyBtn {
            background-color: #28a745;
            color: white;
        }
        .result {
            margin-top: 10px;
            font-size: 18px;
        }
        .correct {
            color: green;
        }
        .incorrect {
            color: red;
        }
        #quizContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
        }
        #startButtonContainer {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }
        select {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        #unitSelectionContainer {
            margin-bottom: 10px;
        }
        #modeSelectionContainer {
            margin-bottom: 10px;
        }
        #questionNumber {
            margin-bottom: 10px;
            font-size: 16px;
        }
        #question {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        #currentUnit {
            margin-bottom: 10px;
            font-size: 16px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <span class="refresh-icon" onclick="location.reload()">&#8635;</span>
        <h2>noaiËÉåÂçïËØç</h2>
        <div id="unitSelectionContainer">
            <select id="unitSelect" onchange="updateWords()">
                <option value="">ËØ∑ÈÄâÊã©ÂÜÖÂÆπ</option>
                <option value="unit1">7Âπ¥Á∫ß‰∏äÂÜåUnit1</option>
                <option value="unit2">7Âπ¥Á∫ß‰∏äÂÜåUnit2</option>
                <option value="unit3">7Âπ¥Á∫ß‰∏äÂÜåUnit3</option>
                <option value="unit4">7Âπ¥Á∫ß‰∏äÂÜåUnit4</option>
                <option value="unit5">7Âπ¥Á∫ß‰∏äÂÜåUnit5</option>
                <option value="unit6">7Âπ¥Á∫ß‰∏äÂÜåUnit6</option>
                <option value="ssp1125">SSP11Êúà25Êó•Áü≠ËØ≠</option>
                <option value="custom">Ëá™ÂÆö‰πâÂçïËØç</option>
            </select>
        </div>
        <textarea id="wordInput" rows="5" placeholder="ËæìÂÖ•ÂçïËØçÊàñËØçÁªÑÔºàÊØèË°å‰∏Ä‰∏™ÔºåÊ†ºÂºè‰∏∫ Ëã±Êñá:‰∏≠ÊñáÔºâ" readonly></textarea><br>
        <div id="modeSelectionContainer">
            <label for="modeSelect">ÈÄâÊã©Ê®°Âºè:</label>
            <select id="modeSelect">
                <option value="chiToEng">‰∏≠ÁøªËã±</option>
                <!--<option value="engToChi">Ëã±Áøª‰∏≠</option>-->
                <option value="mixed">‰∏≠Ëã±Ê∑∑Âêà</option>
            </select>
        </div>
        <div id="startButtonContainer">
            <button onclick="startQuiz()">ÂºÄÂßãÊµãËØï</button>
        </div>
        <div id="quizContainer" style="display:none;">
            <p id="currentUnit"></p>
            <p id="questionNumber"></p>
            <p id="question"></p>
            <input type="text" id="answerInput"><br>
            <button id="submitBtn" onclick="checkAnswer()">Êèê‰∫§</button>
            <div id="result" class="result"></div>
            <button id="restartBtn" onclick="restartQuiz()" style="display:none;">ÈáçÊñ∞ÂºÄÂßã</button>
            <button id="luckyBtn" onclick="window.location.href='https://icloudbi.github.io/words/lucky.html'" style="display:none;">ÊäΩÂ•ñÊ∏∏Êàè</button>
        </div>
    </div>

    <script>
        const wordGroups = {
            unit1: [
                "curious:Â•ΩÂ•áÁöÑ",
                "magazine:ÊùÇÂøó",
                "test:ÊµãËØï",
                "windsurf:ÂÅöÂ∏ÜÊùøËøêÂä®",
                "feeling:ÊÑüÂèó",
                "brave:ÂãáÊï¢ÁöÑ",
                "challenge:ÊåëÊàò",
                "machine:Êú∫Âô®",
                "traffic:‰∫§ÈÄö",
                "board:Êùø",
                "print:ÊâìÂç∞",
                "printing:Âç∞Âà∑",
                "improve:ÊîπÂñÑ",
                "camp:Èú≤Ëê•",
                "grow:ÁîüÈïø",
                "sticker:Ë¥¥Á∫∏",
                "power:È©±Âä®",
                "renewable:ÂèØÂÜçÁîüÁöÑ",
                "discuss:ËÆ®ËÆ∫",
                "everywhere:Âà∞Â§Ñ",
                "impossible:‰∏çÂèØËÉΩÁöÑ",
                "solar panel:Â§™Èò≥ËÉΩÁîµÊ±†Êùø",
                "solar cell:Â§™Èò≥ËÉΩÁîµÊ±†",
                "holder:ÊîØÊâò‰πãÁâ©",
                "fail:Â§±Ë¥•",
                "pizza:ÊØîËê®È•º",
                "burn:ÁÉ´‰º§",
                "pan:Âπ≥Â∫ïÈîÖ",
                "troublesome:‰ª§‰∫∫ÁÉ¶ÊÅºÁöÑ",
                "luckily:Âπ∏Â•Ω",
                "excitedly:ÂÖ¥Â•ãÂú∞",
                "layer:Â±Ç",
                "separate:ÂàÜÁ¶ª",
                "countless:Êó†Êï∞ÁöÑ",
                "succeed:ÊàêÂäü",
                "hopefully:ÊúâÂ∏åÊúõÂú∞",
                "stick:Á≤òË¥¥",
                "device:‰ª™Âô®",
                "away:Á¶ªÂºÄ",
                "take away:ÊãøËµ∞",
                "creative:ÊúâÂàõÈÄ†ÂäõÁöÑ",
                "handle:ÊääÊâã",
                "pround:È™ÑÂÇ≤ÁöÑ"
            ],
            unit2: [
                "radio:Êî∂Èü≥Êú∫",
                "deal:Â§ÑÁêÜ",
                "deal with:Â§ÑÁêÜ",
                "fear:ÂÆ≥ÊÄï",
                "deep:‰ΩéÊ≤âÁöÑ",
                "rough:Á≤óÁ≥ôÁöÑ",
                "belief:‰ø°Âøµ",
                "ourselves:Êàë‰ª¨Ëá™Â∑±",
                "weak:ËôöÂº±ÁöÑ",
                "heart:ÂøÉËÑè",
                "paper cutting:Ââ™Á∫∏",
                "difficulty:Âõ∞Èöæ",
                "teenager:ÈùíÂ∞ëÂπ¥",
                "honest:Âù¶ÁéáÁöÑ",
                "alive:Ê¥ªÁùÄÁöÑ",
                "mascot:ÂêâÁ••Áâ©",
                "dream:Ê¢¶ÊÉ≥",
                "final:ÊúÄÁªàÁöÑ",
                "sink:Ê≤âÊ≤°",
                "later:ÂêéÊù•",
                "news:Ê∂àÊÅØ",
                "funny:ÊªëÁ®ΩÁöÑ",
                "costume:ÊúçË£Ö",
                "instead:‰ª£Êõø",
                "instead of:‰ª£Êõø",
                "had better:ÊúÄÂ•Ω",
                "disappointment:Â§±Êúõ",
                "respond:ÂõûÂ∫î",
                "ring:ÂõûÂìç",
                "after all:ÊØïÁ´ü",
                "decide:ÂÜ≥ÂÆö",
                "become:ÂèòÊàê",
                "through:Âá≠ÂÄü",
                "preparation:ÂáÜÂ§á",
                "breath:ÂëºÂê∏",
                "crowd:‰∫∫Áæ§",
                "chant:ÂèçÂ§çÂëºÂñä",
                "bright:Êòé‰∫ÆÁöÑ",
                "coach:ÊïôÁªÉ",
                "enter:ËøõÊù•",
                "enter for:Êä•ÂêçÂèÇÂä†",
                "design:ËÆæËÆ°",
                "competition:Á´û‰∫â",
                "chance:Êú∫‰ºö",
                "past:ËøáÂéªÁöÑ",
                "deskmate:ÂêåÊ°å",
                "while:‰∏Ä‰ºöÂÑø",
                "firmly:ÂùöÂÆöÂú∞"
            ],
            unit3: [
                "career:ËÅå‰∏ö",
                "quidance:ÊåáÂØº",
                "practical:ÂÆûÈôÖÁöÑ", 
                "hairdresser:ÁêÜÂèëÂ∏à",
                "tailor:Ë£ÅÁºù",
                "service:ÊúçÂä°",
                "officer:ÈïøÂÆò",
                "fireman:Ê∂àÈò≤Âëò",
                "artistic:Ëâ∫ÊúØÁöÑ",
                "photographer:ÊëÑÂΩ±Â∏à",
                "artist:Ëâ∫ÊúØÂÆ∂",
                "actor:Áî∑ÊºîÂëò",
                "actress:Â•≥ÊºîÂëò",
                "engineer:Â∑•Á®ãÂ∏à",
                "architect:Âª∫Á≠ëÂ∏à",
                "designer:ËÆæËÆ°Â∏à",
                "entertain:Â®±‰πê",
                "audience:ËßÇ‰ºó",
                "set:ÊëÑÂΩ±Âú∫",
                "role:ËßíËâ≤",
                "scene:Áé∞Âú∫;Âú∫ÊôØ",
                "arrive:Âà∞Ëææ",
                "page:È°µ",
                "knowledge:Áü•ËØÜ",
                "biology:ÁîüÁâ©Â≠¶",
                "education:ÊïôËÇ≤",
                "above:Ë∂ÖËøá",
                "readiness:‰πêÊÑè",
                "communication:‰∫§ÊµÅ",
                "training:ËÆ≠ÁªÉ",
                "taste:ÂìÅÂ∞ù",
                "maybe:ÊúâÂèØËÉΩ",
                "yours:‰Ω†ÁöÑ",
                "customer:È°æÂÆ¢",
                "market:Â∏ÇÂú∫",
                "everything:ÊØèÊ†∑‰∫ãÁâ©",
                "fresh:Êñ∞È≤úÁöÑ",
                "restaurant:È§êÂéÖ",
                "pride:Ëá™Ë±™",
                "dabbawala:ÈÄÅÈ•≠Áõí‰∫∫",
                "kilometre:ÂçÉÁ±≥",
                "exactly:Á°ÆÂàáÂú∞",
                "ever:Âú®‰ªª‰ΩïÊó∂ÂÄô",
                "centre:‰∏≠ÂøÉ",
                "greet:ÊâìÊãõÂëº",
                "distance:Ë∑ùÁ¶ª",
                "method:ÊñπÊ≥ï",
                "simple:ÁÆÄÂçïÁöÑ",
                "railway:ÈìÅË∑Ø",
                "each other:ÂΩºÊ≠§",
                "address:Âú∞ÂùÄ",
                "deliver:ÈÄíÈÄÅ",
                "serve:ÊúçÂä°",
                "trust:‰ø°‰ªª",
                "respect:Â∞äÊï¨",
                "lively:ÊúâÊ¥ªÂäõÁöÑ",
                "dictionary:ËØçÂÖ∏"
            ],
            unit4: [
                "camera:ÁÖßÁõ∏Êú∫",
                "speaker:Êâ¨Â£∞Âô®",
                "thermostat:Ê∏©ÊéßÂô®",
                "itself:ÂÆÉËá™Â∑±",
                "alarm:Ë≠¶Êä•Âô®",
                "stranger:ÈôåÁîü‰∫∫ ",
                "lock:ÈîÅ",
                "explore:Êé¢Á¥¢",
                "rock:ËΩªËΩªÊëáÊôÉ",
                "shower:Ê∑ãÊµ¥",
                "mode:Ê®°Âºè",
                "text message:Áü≠‰ø°ÊÅØ",
                "bedroom:ÂçßÂÆ§",
                "bathroom:Êµ¥ÂÆ§",
                "suggest:Âª∫ËÆÆ",
                "protect:‰øùÊä§",
                "review:ËØÑËÆ∫",
                "review:Â§ç‰π†",
                "heating:‰æõÊöñ",
                "guide:ÊåáÂØº",
                "personal:‰∏™‰∫∫ÁöÑ",
                "owner:‰∏ª‰∫∫",
                "alarm clock:ÈóπÈíü",
                "keep track of:ËøΩË∏™",
                "schedule:Êó•Á®ãÂÆâÊéí",
                "health care:ÂåªÁñóÊúçÂä°",
                "order:ËÆ¢Ë¥≠",
                "signal:Âèë‰ø°Âè∑",
                "sense:ÊÑèËØÜÂà∞",
                "manage:ÁÆ°ÁêÜ",
                "remind:ÊèêÈÜí",
                "produce:Áîü‰∫ß",
                "store:‰øùÂ≠ò",
                "sore:ÁñºÁóõÁöÑ",
                "throat:ÂóìÂ≠ê",
                "understand:ÁêÜËß£",
                "already:Â∑≤Áªè",
                "depend:‰æùÈù†",
                "depend on:‰æùËµñ",
                "oven:ÁÉ§ÁÆ±",
                "truly:Á°ÆÂÆûÂú∞"
            ],
            unit5: [
                "expect:ÊúüÂæÖ",
                "pleasant:‰ª§‰∫∫ÊÑâÂø´ÁöÑ",
                "element:Ë¶ÅÁ¥†",
                "plot:ÊïÖ‰∫ãÊÉÖËäÇ",
                "main:‰∏ªË¶ÅÁöÑ",
                "director:ÂØºÊºî",
                "polite:ÊúâÁ§ºË≤åÁöÑ",
                "impolite:‰∏çÁ§ºË≤åÁöÑ",
                "correct:ÂáÜÁ°ÆÊó†ËØØÁöÑ",
                "incorrect:‰∏çÂáÜÁ°ÆÁöÑ",
                "screen:Â±èÂπï",
                "web:ÁΩë",
                "spider:ËúòËõõ",
                "friendship:ÂèãË∞ä",
                "animation:Âä®ÁîªÁâá",
                "subtitle:Â≠óÂπï",
                "true:ÁúüÂÆûÁöÑ",
                "wrestle:ÊëîË∑§",
                "weekday:Âë®Â∑•‰ΩúÊó•",
                "ocean:Êµ∑Ê¥ã",
                "classic:ÁªèÂÖ∏ÁöÑ",
                "return:ÂõûÊù•",
                "common:ÂÖ±ÂêåÁöÑ",
                "generation:‰∏Ä‰ª£‰∫∫",
                "animated:Âä®ÁîªÁöÑ",
                "hero:Ëã±ÈõÑ",
                "fight:ÊâìÊñó",
                "sily:ÊÑöË†¢ÁöÑ",
                "fox:ÁãêÁã∏",
                "imagination:ÊÉ≥Ë±°Âäõ",
                "meaningful:ÊúâÊÑè‰πâÁöÑ",
                "form:ÂΩ¢Âºè",
                "ink:Â¢®Ê∞¥",
                "painting:ÁªòÁîª",
                "make-up:ÂåñÂ¶ÜÂìÅ",
                "pretty:ÊºÇ‰∫ÆÁöÑ",
                "custom:‰π†‰øó",
                "rich:‰∏∞ÂØåÁöÑ",
                "whole:ÂÆåÂÖ®ÁöÑ",
                "magic:È≠îÊ≥ï",
                "specialeffects:ÁâπÊäÄÊïàÊûú",
                "recommend:Êé®Ëçê"
            ],
            unit6: [
                "metre:Á±≥",
                "locate:ÂùêËêΩ",
                "total:ÊÄªÁöÑ",
                "length:ÈïøÂ∫¶",
                "height:È´òÂ∫¶",
                "influence:ÂΩ±Âìç",
                "poster:Êµ∑Êä•",
                "breathe:ÂëºÂê∏",
                "frozen:ÂÜ∞ÂÜªÁöÑ",
                "trainer:ÊïôÁªÉ",
                "adventure:ÂÜíÈô©",
                "woods:Ê†ëÊûó",
                "promise:ÊâøËØ∫",
                "promise:ËØ∫Ë®Ä",
                "blood:Ë°Ä",
                "lifeblood:ÁîüÂëΩÁ∫ø",
                "have ... in common:ÊúâÁõ∏ÂêåÁöÑÁâπÂæÅ",
                "cruise:‰πòËàπÊ∏∏Ëßà",
                "interest:Âê∏ÂºïÂäõ",
                "tower:Â°î",
                "tourist:ÊóÖË°åËÄÖ",
                "attraction:ÂêëÂæÄÁöÑÂú∞Êñπ",
                "both:‰∏§‰∏™",
                "flow:ÊµÅÂä®",
                "leading:ÊúÄÈáçË¶ÅÁöÑ",
                "port:Ê∏ØÂè£",
                "environment:ÁéØÂ¢É",
                "provide:Êèê‰æõ",
                "riverside:Ê≤≥Áïî",
                "almost:Âá†‰πé",
                "along:Ê≤øÁùÄ",
                "bank:Â≤∏",
                "nurture:ÂÖªËÇ≤",
                "waterfall:ÁÄëÂ∏É",
                "silver:Èì∂Ëâ≤ÁöÑ",
                "belt:ÁöÆÂ∏¶",
                "glow:ÂèëÂÖâ"
            ],
            ssp1125: [
                "the power of pop culture:ÊµÅË°åÊñáÂåñÁöÑÂäõÈáè",
                "the traditional art form:‰º†ÁªüÁöÑËâ∫ÊúØÂΩ¢Âºè",
                "a video of an actress:‰∏Ä‰∏™Â•≥ÊºîÂëòÁöÑËßÜÈ¢ë",
                "both at home and abroad:Âú®ÂõΩÂÜÖÂ§ñ",
                "in ancient times:Âú®Âè§‰ª£",
                "the female lead:Â•≥‰∏ªËßí",
                "special effects:ÁâπÊïà",
                "use modern language:‰ΩøÁî®Áé∞‰ª£ËØ≠Ë®Ä",
                "add fun to the show:ÁªôË°®ÊºîÂ¢ûÊ∑ªË∂£Âë≥",
                "spread Chinese culture:‰º†Êí≠‰∏≠ÂõΩÊñáÂåñ",
                "online novels:ÁΩëÁªúÂ∞èËØ¥",
                "fix an old wooden fence:‰øÆÁêÜ‰∏Ä‰∏™ÊóßÁöÑÊú®Ê†ÖÊ†è",
                "the largest wild seed bank:ÊúÄÂ§ßÁöÑÈáéÁîüÁßçÂ≠êÈì∂Ë°å",
                "be worth a lot of money:ÂÄºÂæàÂ§öÈí±",
                "because of climate change:Âõ†‰∏∫Ê∞îÂÄôÂèòÂåñ"
            ]
        };

        let selectedUnitName = '';

        function updateWords() {
            const selectedUnit = document.getElementById('unitSelect').value;
            const wordInput = document.getElementById('wordInput');

            if (selectedUnit === 'custom') {
                wordInput.value = '';
                wordInput.readOnly = false;
                selectedUnitName = 'Ëá™ÂÆö‰πâÂçïËØç';
            } else if (wordGroups[selectedUnit]) {
                wordInput.value = wordGroups[selectedUnit].join('\n');
                wordInput.readOnly = true;
                selectedUnitName = document.getElementById('unitSelect').options[document.getElementById('unitSelect').selectedIndex].text;
            } else {
                wordInput.value = '';
                wordInput.readOnly = true;
                selectedUnitName = '';
            }

            // Automatically add line numbers
            const lines = wordInput.value.split('\n');
            const numberedLines = lines.map((line, index) => `${index + 1}. ${line}`);
            wordInput.value = numberedLines.join('\n');
        }

        let words = [];
        let shuffledWords = [];
        let currentWordIndex = 0;
        let correctAnswers = 0;
        let consecutiveCorrect = 0;
        let consecutiveIncorrect = 0;

        function startQuiz() {
            const inputText = document.getElementById('wordInput').value.trim();
            if (!inputText) return alert('ËØ∑ËæìÂÖ•ÂçïËØçÊàñËØçÁªÑ');

            words = inputText.split('\n').map(line => line.trim()).filter(line => line.length > 0);

            // Remove line numbers before processing
            words = words.map(line => line.replace(/^\d+\.\s*/, ''));

            // Filter out invalid lines and split into pairs
            words = words.filter(line => line.includes(':')).map(line => line.split(':').map(part => part.trim()));

            if (words.length === 0) return alert('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂçïËØçÊàñËØçÁªÑÔºàÊ†ºÂºè‰∏∫ Ëã±Êñá:‰∏≠ÊñáÔºâ');

            shuffleArray(words);
            shuffledWords = [...words];
            currentWordIndex = 0;
            correctAnswers = 0;
            consecutiveCorrect = 0;
            consecutiveIncorrect = 0;

            document.getElementById('wordInput').style.display = 'none';
            document.getElementById('startButtonContainer').style.display = 'none';
            document.getElementById('unitSelectionContainer').style.display = 'none'; // Hide unit selection container
            document.getElementById('modeSelectionContainer').style.display = 'none'; // Hide mode selection container
            document.getElementById('quizContainer').style.display = 'flex';

            document.getElementById('currentUnit').innerText = `ÊµãËØïÂÜÖÂÆπ: ${selectedUnitName}`;

            showNextQuestion();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function showNextQuestion() {
            if (currentWordIndex >= shuffledWords.length) {
                endQuiz();
                return;
            }

            const [english, chinese] = shuffledWords[currentWordIndex];
            const mode = document.getElementById('modeSelect').value;
            let question = '';

            if (mode === 'engToChi') {
                question = english;
            } else if (mode === 'chiToEng') {
                question = chinese;
            } else if (mode === 'mixed') {
                question = Math.random() < 0.5 ? english : chinese;
            }

            document.getElementById('question').innerText = question;
            document.getElementById('answerInput').value = '';
            document.getElementById('result').innerText = '';

            // Update question number
            document.getElementById('questionNumber').innerText = `Á¨¨ ${currentWordIndex + 1} / ÂÖ± ${shuffledWords.length} ‰∏™`;
        }

        function checkAnswer() {
            const answer = document.getElementById('answerInput').value.trim();
            const [english, chinese] = shuffledWords[currentWordIndex];
            const mode = document.getElementById('modeSelect').value;

            let isCorrect = false;
            if (mode === 'engToChi' || mode === 'mixed' && document.getElementById('question').innerText.includes(english)) {
                isCorrect = answer.toLowerCase() === chinese.toLowerCase();
            } else if (mode === 'chiToEng' || mode === 'mixed' && document.getElementById('question').innerText.includes(chinese)) {
                isCorrect = answer.toLowerCase() === english.toLowerCase();
            }

            if (isCorrect) {
                correctAnswers++;
                consecutiveCorrect++;
                consecutiveIncorrect = 0;

                if (consecutiveCorrect === 5) {
                    document.getElementById('result').innerText = 'Â§™Ê£í‰∫ÜÔºÅÁªßÁª≠Âä†Ê≤πÔºÅ ‚úîÔ∏è';
                } else if (consecutiveCorrect === 10) {
                    document.getElementById('result').innerText = '‰Ω†ÁúüÊòØÂ§©ÊâçÔºÅ üåü';
                } else {
                    document.getElementById('result').innerText = 'Ê≠£Á°Æ ‚úîÔ∏è';
                }

                document.getElementById('result').classList.add('correct');
            } else {
                consecutiveIncorrect++;
                consecutiveCorrect = 0;

                if (consecutiveIncorrect >= 2) {
                    document.getElementById('result').innerText = `Âà´ÁÅ∞ÂøÉÔºåÁªßÁª≠Âä™ÂäõÔºÅ ‚ùå Ê≠£Á°ÆÁ≠îÊ°àÊòØ: ${english} -> ${chinese}`;
                } else {
                    document.getElementById('result').innerText = `ÈîôËØØ ‚ùå Ê≠£Á°ÆÁ≠îÊ°àÊòØ: ${english} -> ${chinese}`;
                }

                document.getElementById('result').classList.add('incorrect');
            }

            setTimeout(() => {
                document.getElementById('result').innerText = '';
                document.getElementById('result').classList.remove('correct', 'incorrect');
                currentWordIndex++;
                showNextQuestion();
            }, 1500);
        }

        function endQuiz() {
            const accuracy = ((correctAnswers / shuffledWords.length) * 100).toFixed(2);
            let message = '';

            if (accuracy < 60) {
                message = `ÊµãËØïÁªìÊùüÔºÅÊ≠£Á°ÆÁéá: ${accuracy}%„ÄÇÂà´ÁÅ∞ÂøÉÔºåÁªßÁª≠Âä™ÂäõÔºÅ`;
            } else if (accuracy >= 60 && accuracy < 80) {
                message = `ÊµãËØïÁªìÊùüÔºÅÊ≠£Á°ÆÁéá: ${accuracy}%„ÄÇÂä†Ê≤πÔºå‰Ω†ÂèØ‰ª•Êõ¥Ê£íÔºÅ`;
            } else if (accuracy >= 80 && accuracy < 90) {
                message = `ÊµãËØïÁªìÊùüÔºÅÊ≠£Á°ÆÁéá: ${accuracy}%„ÄÇÁúü‰∏çÈîôÔºåÁªßÁª≠‰øùÊåÅÔºÅ`;
            } else {
                message = `ÊµãËØïÁªìÊùüÔºÅÊ≠£Á°ÆÁéá: ${accuracy}%„ÄÇÈùûÂ∏∏Â•ΩÔºÅ`;
            }

            document.getElementById('question').innerText = message;
            document.getElementById('answerInput').style.display = 'none';
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('restartBtn').style.display = 'block';

            if (accuracy > 90) {
                document.getElementById('luckyBtn').style.display = 'block';
            } else {
                document.getElementById('luckyBtn').style.display = 'none';
            }

            document.getElementById('questionNumber').innerText = ''; // Clear question number
        }

        function restartQuiz() {
            document.getElementById('unitSelect').value = '';
            document.getElementById('wordInput').value = '';
            document.getElementById('wordInput').readOnly = true;
            document.getElementById('modeSelect').value = 'chiToEng'; // Default mode set to ‰∏≠ÁøªËã±
            document.getElementById('wordInput').style.display = 'block';
            document.getElementById('startButtonContainer').style.display = 'block';
            document.getElementById('unitSelectionContainer').style.display = 'block'; // Show unit selection container
            document.getElementById('modeSelectionContainer').style.display = 'block'; // Show mode selection container
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('question').innerText = '';
            document.getElementById('answerInput').value = ''; // Ensure answerInput is cleared
            document.getElementById('answerInput').style.display = 'block'; // Show answerInput
            document.getElementById('submitBtn').style.display = 'block'; // Show submitBtn
            document.getElementById('result').innerText = '';
            document.getElementById('restartBtn').style.display = 'none';
            document.getElementById('luckyBtn').style.display = 'none';
            document.getElementById('questionNumber').innerText = ''; // Clear question number
            document.getElementById('currentUnit').innerText = ''; // Clear current unit
        }
    </script>
</body>
</html>
